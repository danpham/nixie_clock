<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nixie clock: software/nixie_clock_esp32_project/components/event_bus/event_bus.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nixie clock
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('event__bus_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">event_bus.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/queue.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for event_bus.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="event__bus_8h__incl.svg" width="315" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="event__bus_8h__dep__incl.svg" width="1231" height="271"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="event__bus_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af615a1228bc7f4e9e5a38aca43da4f8e" id="r_af615a1228bc7f4e9e5a38aca43da4f8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__bus_8h.html#af615a1228bc7f4e9e5a38aca43da4f8e">EVENT_BUS_MAX_PAYLOAD_SIZE</a>&#160;&#160;&#160;32U</td></tr>
<tr class="separator:af615a1228bc7f4e9e5a38aca43da4f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae8b6c8adf534325094a49505941c9f1a" id="r_ae8b6c8adf534325094a49505941c9f1a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1a">event_bus_event_t</a> { <br />
&#160;&#160;<a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aadefecdecde5f34de4a724e87d5a851ed">EVT_NONE</a> = 0
, <a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aaf29c2772a91888148d3f1bc0db1453fd">EVT_CLOCK_NTP_CONFIG</a>
, <a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aa61b4edce34b2cd8eddc358c7378d571a">EVT_CLOCK_GPIO_CONFIG</a>
, <a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aa3c2b9617adcf2c014f70421d79bffd0c">EVT_CLOCK_WEB_CONFIG</a>
, <br />
&#160;&#160;<a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aa85d31e9e92e7f4ffead5f608bb5d4dd0">EVT_NTP_CONFIG</a>
, <a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aa38ab286bb56c6021e252ae9966eea3ff">EVT_WIFI_CONFIG</a>
, <a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1aad766290460e6c44a5f52bd011d0e7058">EVT_PWM_CONFIG</a>
<br />
 }</td></tr>
<tr class="separator:ae8b6c8adf534325094a49505941c9f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a33f2a4382fbba53461edc9ecd30ca51e" id="r_a33f2a4382fbba53461edc9ecd30ca51e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__bus_8h.html#a33f2a4382fbba53461edc9ecd30ca51e">event_bus_init</a> (void)</td></tr>
<tr class="memdesc:a33f2a4382fbba53461edc9ecd30ca51e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Event Bus queue.  <br /></td></tr>
<tr class="separator:a33f2a4382fbba53461edc9ecd30ca51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a79c57756ad83b60ea3a0091019dfd" id="r_a93a79c57756ad83b60ea3a0091019dfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__bus_8h.html#a93a79c57756ad83b60ea3a0091019dfd">event_bus_publish</a> (<a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a> evt_message)</td></tr>
<tr class="memdesc:a93a79c57756ad83b60ea3a0091019dfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish an event to the Event Bus (blocking).  <br /></td></tr>
<tr class="separator:a93a79c57756ad83b60ea3a0091019dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe3e99dfebe392de6462bc2ea30d7b62" id="r_abe3e99dfebe392de6462bc2ea30d7b62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__bus_8h.html#abe3e99dfebe392de6462bc2ea30d7b62">event_bus_try_publish</a> (<a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a> evt_message, TickType_t timeout)</td></tr>
<tr class="separator:abe3e99dfebe392de6462bc2ea30d7b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8ef223aef7d300da0a6d1bbd493424" id="r_a4b8ef223aef7d300da0a6d1bbd493424"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__bus_8h.html#a4b8ef223aef7d300da0a6d1bbd493424">event_bus_wait</a> (TickType_t timeout)</td></tr>
<tr class="memdesc:a4b8ef223aef7d300da0a6d1bbd493424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the next event from the Event Bus.  <br /></td></tr>
<tr class="separator:a4b8ef223aef7d300da0a6d1bbd493424"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af615a1228bc7f4e9e5a38aca43da4f8e" name="af615a1228bc7f4e9e5a38aca43da4f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af615a1228bc7f4e9e5a38aca43da4f8e">&#9670;&#160;</a></span>EVENT_BUS_MAX_PAYLOAD_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVENT_BUS_MAX_PAYLOAD_SIZE&#160;&#160;&#160;32U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ae8b6c8adf534325094a49505941c9f1a" name="ae8b6c8adf534325094a49505941c9f1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8b6c8adf534325094a49505941c9f1a">&#9670;&#160;</a></span>event_bus_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="event__bus_8h.html#ae8b6c8adf534325094a49505941c9f1a">event_bus_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aadefecdecde5f34de4a724e87d5a851ed" name="ae8b6c8adf534325094a49505941c9f1aadefecdecde5f34de4a724e87d5a851ed"></a>EVT_NONE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aaf29c2772a91888148d3f1bc0db1453fd" name="ae8b6c8adf534325094a49505941c9f1aaf29c2772a91888148d3f1bc0db1453fd"></a>EVT_CLOCK_NTP_CONFIG&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aa61b4edce34b2cd8eddc358c7378d571a" name="ae8b6c8adf534325094a49505941c9f1aa61b4edce34b2cd8eddc358c7378d571a"></a>EVT_CLOCK_GPIO_CONFIG&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aa3c2b9617adcf2c014f70421d79bffd0c" name="ae8b6c8adf534325094a49505941c9f1aa3c2b9617adcf2c014f70421d79bffd0c"></a>EVT_CLOCK_WEB_CONFIG&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aa85d31e9e92e7f4ffead5f608bb5d4dd0" name="ae8b6c8adf534325094a49505941c9f1aa85d31e9e92e7f4ffead5f608bb5d4dd0"></a>EVT_NTP_CONFIG&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aa38ab286bb56c6021e252ae9966eea3ff" name="ae8b6c8adf534325094a49505941c9f1aa38ab286bb56c6021e252ae9966eea3ff"></a>EVT_WIFI_CONFIG&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae8b6c8adf534325094a49505941c9f1aad766290460e6c44a5f52bd011d0e7058" name="ae8b6c8adf534325094a49505941c9f1aad766290460e6c44a5f52bd011d0e7058"></a>EVT_PWM_CONFIG&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a33f2a4382fbba53461edc9ecd30ca51e" name="a33f2a4382fbba53461edc9ecd30ca51e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f2a4382fbba53461edc9ecd30ca51e">&#9670;&#160;</a></span>event_bus_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void event_bus_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Event Bus queue. </p>
<p>This function must be called before any event publication or consumption. It allocates a FreeRTOS queue capable of storing multiple <a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a> messages. Subsequent calls have no effect (idempotent).</p>
<dl class="section note"><dt>Note</dt><dd>If this function is not called before <a class="el" href="event__bus_8c.html#a93a79c57756ad83b60ea3a0091019dfd" title="Publish an event to the Event Bus (blocking).">event_bus_publish()</a>, events will simply be ignored because the queue does not exist. </dd></dl>

</div>
</div>
<a id="a93a79c57756ad83b60ea3a0091019dfd" name="a93a79c57756ad83b60ea3a0091019dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93a79c57756ad83b60ea3a0091019dfd">&#9670;&#160;</a></span>event_bus_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void event_bus_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a>&#160;</td>
          <td class="paramname"><em>evt_message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish an event to the Event Bus (blocking). </p>
<p>Adds an event to the queue and blocks until space becomes available if the queue is full. This is the simplest and safest way to publish events when timing is not critical.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evt</td><td>The event to publish. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abe3e99dfebe392de6462bc2ea30d7b62" name="abe3e99dfebe392de6462bc2ea30d7b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe3e99dfebe392de6462bc2ea30d7b62">&#9670;&#160;</a></span>event_bus_try_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool event_bus_try_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a>&#160;</td>
          <td class="paramname"><em>evt_message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4b8ef223aef7d300da0a6d1bbd493424" name="a4b8ef223aef7d300da0a6d1bbd493424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8ef223aef7d300da0a6d1bbd493424">&#9670;&#160;</a></span>event_bus_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structevent__bus__message__t.html">event_bus_message_t</a> event_bus_wait </td>
          <td>(</td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the next event from the Event Bus. </p>
<p>Blocks until an event is available in the queue, unless a timeout is specified. This function is typically called from a dedicated dispatcher task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Maximum time to wait (FreeRTOS ticks).<ul>
<li>portMAX_DELAY: Wait forever <br  />
</li>
<li>0: Non-blocking <br  />
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The received event, or EVT_NONE if a timeout occurs or if the queue is not initialized. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c8fa76d8dc1b9e06ff8aeb3121608b1b.html">software</a></li><li class="navelem"><a class="el" href="dir_4e80761515fcd0d8a8682b4ebda49685.html">nixie_clock_esp32_project</a></li><li class="navelem"><a class="el" href="dir_b181baf956279f894a730e459ce47bc5.html">components</a></li><li class="navelem"><a class="el" href="dir_3df67f4185c8cd9c27353f35f3bf503b.html">event_bus</a></li><li class="navelem"><a class="el" href="event__bus_8h.html">event_bus.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
